import{_ as i,o as p,c as u,a,t as l,b as f,d as h,n as m,e as v,r as b,f as c,g as _}from"./index-N_QlHFU0.js";import{C as g}from"./auto-sRkgK8jz.js";const x={name:"DashboardStats",props:{totals:{type:Object,default:()=>({sales:0,purchases:0,clients:0})}}},y={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},C={class:"card p-4"},$={class:"text-2xl font-bold"},D={class:"card p-4"},R={class:"text-2xl font-bold"},S={class:"card p-4"},k={class:"text-2xl font-bold"};function B(r,t,o,d,s,e){return p(),u("div",y,[a("div",C,[t[0]||(t[0]=a("div",{class:"text-sm muted"},"Vendas Totais",-1)),a("div",$,"R$ "+l(o.totals.sales),1)]),a("div",D,[t[1]||(t[1]=a("div",{class:"text-sm muted"},"Compras Totais",-1)),a("div",R,"R$ "+l(o.totals.purchases),1)]),a("div",S,[t[2]||(t[2]=a("div",{class:"text-sm muted"},"Clientes Ativos",-1)),a("div",k,l(o.totals.clients),1)])])}const V=i(x,[["render",B]]),w={components:{DashboardStats:V},setup(){const r=_({sales:0,purchases:0,clients:0});let t=null;const o=async()=>{try{const[s,e,n]=await Promise.all([c.get("/api/v1/vendas/total").catch(()=>({data:{total:0}})),c.get("/api/v1/compras/total").catch(()=>({data:{total:0}})),c.get("/api/v1/clientes/ativos").catch(()=>({data:{total:0}}))]);r.value={sales:s.data.total,purchases:e.data.total,clients:n.data.total}}catch(s){console.error("Erro ao buscar totais:",s)}},d=()=>{const s=document.getElementById("sales-chart");if(!s)return;t&&t.destroy();const e=s.getContext("2d").createLinearGradient(0,0,0,300);e.addColorStop(0,"rgba(99, 102, 241, 0.4)"),e.addColorStop(1,"rgba(99, 102, 241, 0.05)"),t=new g(s,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May"],datasets:[{label:"Vendas",data:[5e3,1e4,7500,12500,15e3],borderColor:"#6366f1",backgroundColor:e,tension:.4,fill:!0,pointRadius:4,pointBackgroundColor:"#6366f1"}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#111827",padding:10,cornerRadius:8}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0,0,0,0.05)"}}}}})};return h(async()=>{await m(),o(),d()}),v(()=>{t&&t.destroy()}),{totals:r}}},A={class:"dashboard-container"};function E(r,t,o,d,s,e){const n=b("DashboardStats");return p(),u("div",A,[t[0]||(t[0]=a("div",{class:"dashboard-header"},[a("h2",{class:"dashboard-title"},"Dashboard")],-1)),f(n,{totals:d.totals},null,8,["totals"]),t[1]||(t[1]=a("div",{class:"chart-card"},[a("div",{class:"chart-header"},[a("h3",null,"Gr√°fico de Vendas")]),a("div",{class:"chart-wrapper"},[a("canvas",{id:"sales-chart"})])],-1))])}const T=i(w,[["render",E],["__scopeId","data-v-42e86fac"]]);export{T as default};
